# Linux 的文件权限与目录配置

## １．用户和用户组

为了保护隐私及更好的协同合作

默认情况下，所有的系统上的账号与一般身份用户，还有那个root相关的信息都存在/etc/passwd文件夹内

个人密码记录在/etc/shadow中

Linux所有的组名都记录在/etc/group内

详情见后文

## ２．Linux文件权限

```
$ ls -al
drwxrwxr-x  5 zjj  zjj     4096 Nov  3 06:59 .ipython
----------  - ---  ---     ---- ------------ ---------
     1      2  3    4        5       6          7
```

上述结果解析：

|  编号  |    含义     |                    补充                    |
| :--: | :-------: | :--------------------------------------: |
|  １   |   文件权限    | 第一个字符带表文件属性，"d"指文件夹，"-"指文件，"\|"指连接文件，"b"指可供存储的接口设备，"c"表示串行端口设备，如键盘鼠标．　接下来的字符分为三组，均为"rwx"的组合，分别代表可读可写可执行，三者位置不会发生改变，没有权限用"-"表示．　　若用数字表示，r->4, w->2, x->1三组分别代表文件所有者,同用户组和非本组用户的权限 |
|  ２   |    连接数    | 每个文件都会将它的属性和权限记录在文件系统的i-node中，这个值就是指有多少不同的文件名连接到相同的i-node上 |
|  ３   |   文件所有者   |                                          |
|  ４   |  文件所属用户组  |                                          |
|  ５   |   文件大小    |                   默认为B                   |
|  ６   | 文件最后被修改时间 |      可用指令"ls -l --full-time"来查看完整时间      |
|  ７   |    文件名    |               名前加"."表示隐藏文件               |

###**修改文件属性与权限：**

|  命令   |    作用     |                    补充                    |
| :---: | :-------: | :--------------------------------------: |
| chgrp | 改变文件所属用户组 |             chgrp zjj a.txt              |
| chown |  改变用户所有者  | chown root:root a.txt   #　可以同时修改文件的所有者和用户组　　chown  .root a.txt #　只修改用户组 |
| chmod |  改变文件的权限  | 两种方法修改文件权限：1. 数字类型修改，如cmod 777 a.txt.   2. 符号类型修改，使用u,g,o带便３种身份的权限，a代表所有身份，如chmod u=rwx,g=rx,o-r a.txt，具体符号含义见下表 |

|  命令   |    身份    |  操作   |  权限  | 文件或目录 |
| :---: | :------: | :---: | :--: | :---: |
| chmod |  u(所有者)  | +（添加） |  r   |       |
|       |   g(组)   | -（除去） |  w   |       |
|       | o(非本组用户) | +（设置） |  x   |       |
|       | a(所有用户)  |       |      |       |

### **目录与文件的权限意义：**

1. 权限对文件的重要性

   文件是实际含有数据的地方，其权限的意义如下：

   |     权限     |            含义             |
   | :--------: | :-----------------------: |
   |  r(read)   | 可读取此文件的实际内容，如读取文本文件的文字内容等 |
   |  w(write)  |       可以增，删，改文件的内容        |
   | x(execute) |      该文件具有可以被系统执行的权限      |

   上述三个权限都是主要是针对＂文件的内容＂而言，与文件名的存在与否没有关系．

   与windows不同，在Linux中文件是否能被执行由是否具有"x"这个权限来决定，而跟文件名是没有绝对关系的．

   "w"权限只能对文件的内容进行增删改，**并不具备删除该文件本身的权限．**

2. 权限对目录的重要性

   目录的主要内容是：文件名列表

   |  权限  | 含义                                       |
   | :--: | :--------------------------------------- |
   |  r   | 可以读取该目录下的文件名数据，如ls操作                     |
   |  w   | 表示用户具有更改该目录结构列表的权限，如：在该目录下：新建文件与目录，删除已经存在的文件与目录（**不论该文件或文件夹的权限如何，若文件夹没有w权限，且其内有数据（文件或文件夹）将不能删除**），将已存在的文件或目录进行重命名，转移该目录内的文件或目录的位置等 |
   |  x   | 目录的x表示用户能否进入该目录并把其设成为工作目录，如cd命令，**无此权限则无法执行该目录下的指令，可执行文件等** |

   **总结：**目录的"r"和"w"权限主要对于目录下文件名列表的操作，而"x"权限主要是对于目录下文件的数据内容和是否能成为工作目录进行操作．

##3. Linux目录配置

###Linux 目录配置标准：FHS (Filesystem Hierarchy Standard )

为了让各种distributions具有类似的目录配置方式，方便用户了解已安装软件通常放置的目录，[FHS](http://www.pathname.com/fhs/)应声而出．

FHS根据文件系统使用的频繁与否与是否允许用户随意改动，将目录定义成四种交互的形态，如下：

|                |             可分享的(shareable)             |       不可分享的(unshareable)       |
| :------------: | :-------------------------------------: | :----------------------------: |
|  不可变的(static)  |        /usr(软件放置处)　　　/opt(第三方软件)        | /etc(配置文件)     /boot(开机与内核文件)  |
| 可变动的(variable) | /var/mail(用户邮箱信件)　　/var/spool/news(新闻组) | /var/run(程序相关)　/var/lock(程序相关) |

事实上，FHS针对目录树架构只定义出三个目录下应该放置什么数据：

|              目录               |     内容     |
| :---------------------------: | :--------: |
|         / (root,根目录)          |  与开机系统有关   |
| /user(UNIX software resource) | 与软件安装/执行有关 |
|        /var(variable)         | 与系统运作过程有关  |

给个目录下的具体内容，可以参考上述官方网址

***根目录：***

下面几个灰常重要的目录：

|     目录      |                  应放置的内容                  |
| :---------: | :--------------------------------------: |
| /lost+found | 之歌目录是使用标准的ext2/ext3文件系统才会存在的一个目录，目的是在于当文件系统发生错误时，将一些丢失的文件片断存放于这个目录下．这个目录通常在分区的最顶层存在，如装一个硬盘于/disk时，那在这个系统下会自动产生一个"/disk/lost+found"目录 |
|    /proc    | 这个目录本身是虚拟文件系统，它放置的内容都存在于内存当中，例如系统内核，进程，外部设备的状态及网络状态等，本身不占硬盘内存．比较重要的文件如/proc/cpuinfo, /proc/dma, /proc/interrupts, /proc/ioports, /proc/net/*等 |
|    /sys     | 与/proc类似，也是与你文件系统，主要是记录与内核有关的信息，包括目前已经加载的内核模块与内核检测到的硬件设备信息等． |

另外要注意的是：根目录与开机有关，开机过程中仅有根目录会被挂载，因此根目录下与开机过程有关的目录就要与根目录放在同一个区．这些目录如下：

> /etc: 配置文件
>
> /bin:重要执行文件
>
> /dev: 所需设备文件
>
> /lib: 执行文件所需的函数库与内核所需的模块
>
> /sbin: 重要的系统执行文件

**目录树：**









