# 认识学习bash

##１．认识bash

###简介

只要能操作应用程序的接口都叫shell.

Linux使用的shell版本较多，查询方法如下：

```
$ cat /etc/shells 
# /etc/shells: valid login shells
/bin/sh
/bin/dash
/bin/bash                  <==Linux默认的shell
/bin/rbash
/usr/bin/tmux
/usr/bin/screen

```

系统默认的shell可以用下面的命令查看：

```
$ cat /etc/passwd
```

### bash shell的功能

bash的主要优点如下：

1. 命令记忆功能

   bash会记录下你以前执行的指令，默认可达到１０００个．

   这些命令记录在.bash_history文件中．需要注意的是，这个文件记载的时前一次登录所执行的命令，本次登录执行的命令会先存在于内存中，当成功注销后，该命令记忆才会记录到.bash_history中．

2. 命令与文件补全功能（[Tab]）

3. 命令别名设置功能(alias)

4. 作业控制，前台，后台控制

5. 程序脚本(shell script)

6. 通配符(Wildcard)

### bash shell的内置命令：type

bash内置了很多命令，如：cd, umarsk等

使用type命令可以查看命令的特征：

```
$ type ls
ls is aliased to `ls --color=auto'     <== 别名
$ type cd
cd is a shell builtin　　　　　　　　　　 <== shell内置

```

### 命令的执行

可用'\'转义'[Enter]'，实现命令换行

## ２．shell的变量功能

### 变量的显示与设置：echo, unset

1. 变量的显示：echo

   ```
   $ echo $variable    <== 语法
   $ echo $PATH
   或
   $ echo ${PATH}
   ```

2. 变量的设置：＝

   ```
   $ myname = zjj
   $ echo $zjj
   ```

   ​

3. 变量的设置规则：

   3.1 变量与变量内容以一个符号＂＝＂来连接，如下所示：

   ​	"myname=jj"

   3.2 等号两边不能直接接空格

   ​	"myname =jj"和"myname=j  j"都是错误的

   3.3 变量名称只能是英文字母和数字，且开头字符不能是数字

   3.4 变量内容如有空格可使用双引号或单引号将变量内容结合起来但是：

   	> **双引号内的特殊字符如$等，可以保持原有的特性**
   	>
   	> **单引号内的特殊字符只是一般的字符**

   3.5 可用转义字符'\'将特殊符号（如：[Enter], $, \, 空格, !等）转义成一般字符

   3.6　在一串命令中，可能需要通过其他的命令提供的信息，可以使用```"`命令`"```或"$(命令)"

   ​	如：```version=$(uname -r)``` 则可用```echo $version``` 命令的到"4.4.0-87-generic"

   ​	进入内核模块目录：```cd /lib/modules/`uname -r`/kernel```

   3.7 若该变量为了增加变量内容时，则可以用```"$变量名称"``` 或```${变量}``` 累加内容，如下所示：

   ​	```PATH="$PATH":/home/bin``` <==双引号，保持$原有的特性

     或：```PATH=$SPATH:/home/bin```

     或：```PATH=${SPATH}:/home/bin```

   3.8 若该变量需要在其他子进程执行，则需要以export来使变量变为环境变量：

   ​	"export PATH"

   3.９通常大写字符为系统默认字符，所有自行设置的变量尽量使用小写字符

   3.10 取消变量的方法为使用"unset 变量名",如："$ unset myname"

### 环境变量的功能

1. 查看环境变量的命令：env, export

```
＃ 用env列出目前shell环境下的所欲环境变量与其内容
$ env
LC_PAPER=zh_CN.UTF-8
XDG_SESSION_ID=467
...
```

环境变量及其含义:

|    变量    |                    含义                    |
| :------: | :--------------------------------------: |
|   HOME   |                代表用户的主文件夹                 |
|  SHELL   |          标明目前这个环境使用的shell程序是哪个           |
| HISTSIZE |                存储历史命令的条数值                |
|   MAIL   |                 用户邮箱文件位置                 |
|   PATH   | 执行文件查找的路径,目录与目录之间以(:)隔开,文件的查找顺序来,所以目录的顺序很总要 |
|   LANG   |   语系数据,中文通常是:zh_CN.gb2312和zh_CN.UTF-8    |
|  RANDOM  |   随机数生成器,echo $RANDOM时会给个0~32768之间的随机数   |

2. 用set查看所有变量(环境变量和自定义变量)

比较重要的几个变量为:

> 1. PS1(提示符的设置)
>
>    ```c
>    $ set | grep PS1
>    PS1='\[\e]0;\u@\h: \w\a\]${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
>
>    ```
>
>    PS1时我们的命令提示符,每次[Enter]时都会去读这个变量值,其主要参数如下:
>
>    |    参数    |                含义                 |
>    | :------: | :-------------------------------: |
>    |    \d    |      可以显示"星期月日",如"Mon Feb 2"      |
>    |    \H    |              完整的主机名               |
>    |    \h    |         仅取主机名第一个小数点之前的名字          |
>    |    \t    |      显示时间,为24小时格式的"HH:MM:SS"      |
>    |    \T    |      显示时间,为12小时格式的"HH:MM:SS"      |
>    |    \A    |       显示时间,为24小时格式的"HH:MM"        |
>    |    \@    |       显示时间,为12小时格式的"am/pm"        |
>    |    \u    |         目前用户的账号名称,如"root"         |
>    |    \v    |             BASH的版本信息             |
>    |    \w    |  完整的工作目录名称,由根目录泄气的目录名称,主文件夹会以~代替  |
>    |  \W(大写)  | 利用basename函数取得的工作目录名称,仅会列出最后一个目录名 |
>    | ```\#``` |             执行的第几个命令              |
>    | ```\$``` |        提示符,如果是root就为#,否则为$        |
>
>    ​
>
> 2. $ (本shell的ID)
>
>    shell的PID,用"echo $$"命令显示
>
> 3. ? (上个命令的回传码)
>
>    如果上个命令执行成功,则为0,执行错误则会返回错误码
>
> 4. OSTYPE, HOSTTYPE, MACHTYPE (主机硬盘与内核的等级)
>
> 5. export (自有变量转成环境变量)
>
>    子进程会继承父进程的环境变量,而不会继承自定义变量
>
>    ```
>    # 将自定义变量变为环境变量,使其可以被子进程bash使用
>    $ export 变量名
>    ```
>
>    ​
>
> 6. ​